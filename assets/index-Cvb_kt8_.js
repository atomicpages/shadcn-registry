import{r as c}from"./index-CE0XXScK.js";import{u as S,a as h}from"./index-BErBjXyl.js";import{u as O}from"./index-Dv1nZR32.js";function C(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e==null||e(o),r===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function z({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,o]=b({defaultProp:t,onChange:r}),s=e!==void 0,f=s?e:n,u=S(r),a=c.useCallback(i=>{if(s){const d=typeof i=="function"?i(e):i;d!==e&&u(d)}else o(i)},[s,e,o,u]);return[f,a]}function b({defaultProp:e,onChange:t}){const r=c.useState(e),[n]=r,o=c.useRef(n),s=S(t);return c.useEffect(()=>{o.current!==n&&(s(n),o.current=n)},[n,o,s]),r}function E(e){const[t,r]=c.useState(void 0);return h(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let f,u;if("borderBoxSize"in s){const a=s.borderBoxSize,i=Array.isArray(a)?a[0]:a;f=i.inlineSize,u=i.blockSize}else f=e.offsetWidth,u=e.offsetHeight;r({width:f,height:u})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}function y(e,t){return c.useReducer((r,n)=>t[r][n]??r,e)}var R=e=>{const{present:t,children:r}=e,n=v(t),o=typeof r=="function"?r({present:n.isPresent}):c.Children.only(r),s=O(n.ref,P(o));return typeof r=="function"||n.isPresent?c.cloneElement(o,{ref:s}):null};R.displayName="Presence";function v(e){const[t,r]=c.useState(),n=c.useRef({}),o=c.useRef(e),s=c.useRef("none"),f=e?"mounted":"unmounted",[u,a]=y(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const i=A(n.current);s.current=u==="mounted"?i:"none"},[u]),h(()=>{const i=n.current,l=o.current;if(l!==e){const N=s.current,m=A(i);e?a("MOUNT"):m==="none"||(i==null?void 0:i.display)==="none"?a("UNMOUNT"):a(l&&N!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,a]),h(()=>{if(t){let i;const l=t.ownerDocument.defaultView??window,d=m=>{const g=A(n.current).includes(m.animationName);if(m.target===t&&g&&(a("ANIMATION_END"),!o.current)){const M=t.style.animationFillMode;t.style.animationFillMode="forwards",i=l.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=M)})}},N=m=>{m.target===t&&(s.current=A(n.current))};return t.addEventListener("animationstart",N),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{l.clearTimeout(i),t.removeEventListener("animationstart",N),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else a("ANIMATION_END")},[t,a]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:c.useCallback(i=>{i&&(n.current=getComputedStyle(i)),r(i)},[])}}function A(e){return(e==null?void 0:e.animationName)||"none"}function P(e){var n,o;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}export{R as P,E as a,C as c,z as u};
